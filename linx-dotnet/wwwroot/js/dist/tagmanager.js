var Linx;Linx=function(){"use strict";var t={854:function(t,e,n){var s=this&&this.__awaiter||function(t,e,n,s){return new(n||(n=Promise))((function(i,a){function r(t){try{l(s.next(t))}catch(t){a(t)}}function o(t){try{l(s.throw(t))}catch(t){a(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,o)}l((s=s.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,s,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(a){return function(o){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(i=2&a[0]?s.return:a[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,a[1])).done)return i;switch(s=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,s=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!((i=(i=r.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=e.call(t,r)}catch(t){a=[6,t],s=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,o])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.TagInput=void 0;var a,r,o=n(834);function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}function u(t,e,n){return Array.from({length:n},(function(n,s){return s*e+t}))}!function(t){t[t.ENTER=13]="ENTER",t[t.TAB=9]="TAB",t[t.BACKSPACE=8]="BACKSPACE",t[t.HOME=35]="HOME",t[t.END=36]="END",t[t.LEFT_ARROW=37]="LEFT_ARROW",t[t.UP_ARROW=38]="UP_ARROW",t[t.RIGHT_ARROW=39]="RIGHT_ARROW",t[t.DOWN_ARROW=40]="DOWN_ARROW"}(a||(a={})),function(t){t[t.UP=0]="UP",t[t.DOWN=1]="DOWN"}(r||(r={}));var g=[a.ENTER,a.TAB,a.BACKSPACE,a.HOME,a.END,a.LEFT_ARROW,a.UP_ARROW,a.RIGHT_ARROW,a.DOWN_ARROW],d=u(48,1,10).concat(u(65,1,26)).concat([189]).concat(g),c=function(){function t(t){var e=this;this.getId=t.getId,this.getLabel=t.getLabel,this.newItemFactory=t.newItemFactory,this.data=t.data.map((function(t){return{id:e.getId(t),label:e.getLabel(t)}}));var n=t.input;if(this.enableSuggestions=!1!==t.enableSuggestions,this.minCharsBeforeShowingSuggestions=t.minCharsBeforeShowingSuggestions||2,this.allowNewTags=!1!==t.allowNewTags,this.allowNewTags&&!this.newItemFactory)throw Error("A newItemFactory function must be specified if allowNewTags is true");this.tagDataSeparator=t.tagDataSeparator||"|",this.validTagCharacterKeyCodes=t.validTagCharacterKeyCodes||d,this.allowUpperCase=t.allowUpperCase||!1,this.onTagAdded=t.onTagAdded||l,this.onTagRemoved=t.onTagRemoved||l,this.onTagsChanged=t.onTagsChanged||l,this.globalCssClassPrefix=t.globalCssClassPrefix||"mab-bootstrap-taginput",this.placeholderText=n.getAttribute("placeholder"),this.htmlTemplate=(t.htmlTemplate||'<div class="{{globalCssClassPrefix}}{{#containerClasses}} {{containerClasses}}{{/containerClasses}}">\n    {{#tags}}{{> item}}{{/tags}}\n    <input class="{{globalCssClassPrefix}}-data" type="hidden" name="{{hiddenInput.name}}" id="{{hiddenInput.id}}" value="{{hiddenInput.value}}">\n    <div class="{{globalCssClassPrefix}}-input-container">\n        <input class="{{globalCssClassPrefix}}-input" type="text"{{#placeholder}} placeholder="{{placeholder}}"{{/placeholder}}>\n        <div class="{{globalCssClassPrefix}}-suggestions {{globalCssClassPrefix}}-suggestions-hidden"></div>\n    </div>\n</div>').trim(),this.itemTemplate=(t.itemTemplate||'<div class="{{globalCssClassPrefix}}-tag" data-id="{{id}}" data-label="{{label}}">{{label}} <i class="fa fa-times"></i></div>').trim(),this.suggestionTemplate=(t.suggestionTemplate||'<div class="{{globalCssClassPrefix}}-suggestion" data-id="{{id}}" data-label="{{label}}">{{label}}</div>').trim(),o.parse(this.htmlTemplate),o.parse(this.itemTemplate),o.parse(this.suggestionTemplate),this.warningClass=this.globalCssClassPrefix+"-tag-warning",this.narrowedInputClass=this.globalCssClassPrefix+"-input-narrowed",this.multiCaseInputClass=this.globalCssClassPrefix+"-input-multicase",this.suggestionDropdownClass=this.globalCssClassPrefix+"-suggestions",this.suggestionDropdownHiddenClass=this.globalCssClassPrefix+"-suggestions-hidden",this.suggestionClass=this.globalCssClassPrefix+"-suggestion",this.selectedSuggestionClass=this.suggestionClass+"-selected";var u=n.value.split(this.tagDataSeparator);this.currentSelection=this.data.filter((function(t){return u.includes(t.id)}));var g={containerClasses:n.classList.value,globalCssClassPrefix:this.globalCssClassPrefix,tags:this.currentSelection,hiddenInput:{name:n.name,id:n.id,value:n.value},placeholder:this.placeholderText},c={item:this.itemTemplate},p=o.render(this.htmlTemplate,g,c),h=document.createElement("template");function f(t){var e;return"input[type=text]",((e=t).matches||e.webkitMatchesSelector).call(e,"input[type=text]")}h.insertAdjacentHTML("afterbegin",p),this.tagInputContainer=h.firstChild.cloneNode(!0),this.tagInputHiddenInput=this.tagInputContainer.querySelector("[type=hidden]"),this.tagInputTextInput=this.tagInputContainer.querySelector("[type=text]"),this.tagInputSuggestionDropdown=this.tagInputContainer.querySelector("."+this.suggestionDropdownClass),h.remove(),n.insertAdjacentElement("afterend",this.tagInputContainer),n.remove(),this.allowUpperCase&&this.tagInputTextInput.classList.add(this.multiCaseInputClass),this.tagInputContainer.addEventListener("click",(function(t){var n=t.target;n.classList.contains("fa-times")&&(t.stopPropagation(),e.removeTag(n.parentElement))}),!1),this.enableSuggestions&&(this.tagInputSuggestionDropdown.addEventListener("mousedown",(function(t){return s(e,void 0,void 0,(function(){return i(this,(function(e){return t.preventDefault(),[2]}))}))})),this.tagInputSuggestionDropdown.addEventListener("click",(function(t){return s(e,void 0,void 0,(function(){var e,n;return i(this,(function(s){switch(s.label){case 0:return e=t.target,n=e.getAttribute("data-label"),[4,this.addTag(n)];case 1:return s.sent(),[2]}}))}))})),this.tagInputTextInput.addEventListener("keyup",(function(t){if(t.keyCode===a.UP_ARROW||t.keyCode===a.DOWN_ARROW){var n=t.keyCode===a.DOWN_ARROW?r.DOWN:r.UP,s=e.tagInputSuggestionDropdown.querySelector("."+e.selectedSuggestionClass);if(s){var i=n===r.DOWN?s.nextElementSibling:s.previousElementSibling;if(!i){var l=e.tagInputSuggestionDropdown.querySelectorAll("."+e.suggestionClass);i=n===r.DOWN?l[0]:l[l.length-1]}s.classList.remove(e.selectedSuggestionClass),i.classList.add(e.selectedSuggestionClass),e.tagInputTextInput.value=i.getAttribute("data-label")}else if(n===r.DOWN){var u=e.tagInputSuggestionDropdown.firstChild;u.classList.add(e.selectedSuggestionClass),e.tagInputTextInput.value=u.getAttribute("data-label")}}else if(e.validTagCharacterKeyCodes.includes(t.keyCode)){var g=e.getTextInputValue(e.allowUpperCase);if(g.length<e.minCharsBeforeShowingSuggestions)return void e.hideSuggestions();var d=g.toUpperCase(),c=e.data.filter((function(t){return!e.currentSelection.includes(t)})).filter((function(t){return t.label.toUpperCase().indexOf(d)>-1})).map((function(t){var n={globalCssClassPrefix:e.globalCssClassPrefix,id:t.id,label:t.label};return o.render(e.suggestionTemplate,n)}));if(!c.length)return void e.hideSuggestions();e.tagInputSuggestionDropdown.innerHTML=c.join(""),e.showSuggestions()}}))),this.tagInputTextInput.addEventListener("keydown",(function(t){return s(e,void 0,void 0,(function(){var e,n,s;return i(this,(function(i){switch(i.label){case 0:return this.validTagCharacterKeyCodes.includes(t.keyCode)||t.preventDefault(),e=this.getTextInputValue(this.allowUpperCase),t.keyCode!==a.ENTER||""===e?[3,2]:(t.preventDefault(),t.stopPropagation(),[4,this.addTag(e)]);case 1:i.sent(),i.label=2;case 2:return t.keyCode===a.BACKSPACE&&""===e&&(n=this.tagInputContainer.querySelectorAll("."+this.globalCssClassPrefix+"-tag")).length&&(s=n[n.length-1],this.removeTag(s)),[2]}}))}))})),this.tagInputTextInput.addEventListener("focus",(function(t){f(t.target)&&e.showTagInput()})),this.tagInputTextInput.addEventListener("blur",(function(t){f(t.target)&&(e.clearTagInput(),e.hideSuggestions(),e.currentSelection.length&&e.hideTagInput())})),this.tagInputContainer.addEventListener("click",(function(t){e.focusTagInput()})),""!==this.getHiddenInputValue()&&this.hideTagInput()}return t.prototype.getValue=function(){return this.getHiddenInputValue()},t.prototype.addTag=function(t){return s(this,void 0,void 0,(function(){var e,n,s,a,r,l,u=this;return i(this,(function(i){switch(i.label){case 0:return(e=this.currentSelection.find((function(e){return e.label===t})))?[3,3]:(n=this.data.find((function(e){return e.label===t})))?[3,2]:this.allowNewTags?[4,this.newItemFactory(t)]:[2];case 1:s=i.sent(),n={id:this.getId(s),label:this.getLabel(s)},this.data.push(n),i.label=2;case 2:return this.currentSelection.push(n),a={id:n.id,label:n.label,globalCssClassPrefix:this.globalCssClassPrefix},r=o.render(this.itemTemplate,a),this.tagInputHiddenInput.insertAdjacentHTML("beforebegin",r),this.clearTagInput(),this.hideSuggestions(),this.updateHiddenInput(this.currentSelection),this.onTagAdded(this,[n],this.currentSelection),this.onTagsChanged(this,[n],[],this.currentSelection),[3,4];case 3:(l=this.tagInputContainer.querySelector("."+this.globalCssClassPrefix+'-tag[data-label="'+e.label+'"]')).classList.add(this.warningClass),this.clearTagInput(),setTimeout((function(){l.classList.remove(u.warningClass)}),1500),i.label=4;case 4:return[2]}}))}))},t.prototype.getTextInputValue=function(t){var e=this.tagInputTextInput.value.trim();return t?e:e.toLowerCase()},t.prototype.getHiddenInputValue=function(){return this.tagInputHiddenInput.value.trim()},t.prototype.showTagInput=function(){this.placeholderText&&this.tagInputTextInput.setAttribute("placeholder",this.placeholderText),this.tagInputTextInput.classList.remove(this.narrowedInputClass)},t.prototype.focusTagInput=function(){this.tagInputTextInput.focus()},t.prototype.hideTagInput=function(){""===this.getTextInputValue(this.allowUpperCase)&&(this.tagInputTextInput.setAttribute("placeholder",""),this.tagInputTextInput.classList.add(this.narrowedInputClass))},t.prototype.clearTagInput=function(){this.tagInputTextInput.value=null},t.prototype.updateHiddenInput=function(t){this.tagInputHiddenInput.value=t.map((function(t){return t.id})).join(this.tagDataSeparator)},t.prototype.showSuggestions=function(){this.tagInputSuggestionDropdown.classList.remove(this.suggestionDropdownHiddenClass)},t.prototype.hideSuggestions=function(){this.tagInputSuggestionDropdown.classList.add(this.suggestionDropdownHiddenClass)},t.prototype.removeTag=function(t){var e=t.getAttribute("data-label"),n=this.currentSelection.findIndex((function(t){return t.label===e})),s=this.currentSelection[n];this.currentSelection.splice(n,1),t.remove(),this.updateHiddenInput(this.currentSelection),this.onTagRemoved(this,[s],this.currentSelection),this.onTagsChanged(this,[],[s],this.currentSelection)},t}();e.TagInput=c},587:function(t,e,n){e.E=void 0;var s=n(854);Object.defineProperty(e,"E",{enumerable:!0,get:function(){return s.TagInput}})},844:function(t,e,n){n.r(e);var s,i,a=n(587),r=document.getElementsByClassName("tag-input-merge");try{for(var o=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],s=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(r),l=o.next();!l.done;l=o.next()){var u=l.value;new a.E({input:u,data:_ALL_TAGS_MERGE||[],getId:function(t){return t.id},getLabel:function(t){return t.label},allowNewTags:!1,minCharsBeforeShowingSuggestions:1})}}catch(t){s={error:t}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(s)throw s.error}}},834:function(t){t.exports=Mustache}},e={};function n(s){if(e[s])return e[s].exports;var i=e[s]={exports:{}};return t[s].call(i.exports,i,i.exports,n),i.exports}return n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(844)}();
//# sourceMappingURL=tagmanager.js.map